{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {

  },
  "variables": {

  },
  "resources": [
    {
      "comments": "### RESOURCE - EVENT GRID SUBSCRIPTION ###",
      "apiVersion": "2018-05-01-preview",
      "type": "Microsoft.EventGrid/topics/providers/eventSubscriptions",
      "name": "[concat(variables('eventGridTopic').name, '/Microsoft.EventGrid/', variables('eventGridSubscription').name)]",
      "location": "[variables('eventGridSubscription').location]",
      "dependsOn": [
        "[variables('logicApp').name]",
        "[variables('eventGridTopic').name]"
      ],
      "properties": {
        "eventDeliverySchema": "EventGridSchema",
        "destination": {
          "endpointType": "AzureFunction",
          "properties": {
            "endpoint": "[listCallbackUrl(variables('logicApp').triggerId, '2017-07-01').value]"
          }
        },
        "filter": {

        }
      }
    }
   ]
}